# LDAP Default Group 插件

## 插件简介

LDAP Default Group 是一个为 GLPI (Gestionnaire Libre de Parc Informatique) 开发的插件，用于在 LDAP 同步用户时自动将默认分组字段设置为用户的第一个群组。

## 功能特点

- 在 LDAP 用户同步过程中自动设置默认分组
- 优先选择动态群组作为默认分组
- 简化用户权限管理流程
- 提高管理员工作效率

## 作者

KISSWAM

## 许可证

GPLv2+

## 安装说明

### 前置条件

- GLPI 10.0 或 10.1 版本
- 已配置好的 LDAP 认证系统

### 安装步骤

1. 下载或克隆本插件到 GLPI 的插件目录：
   ```
   cd /path/to/glpi/plugins/
   git clone [repository-url] ldapdefaultgroup
   ```
   或直接将插件文件复制到 `plugins/ldapdefaultgroup/` 目录

2. 登录 GLPI 管理界面

3. 导航至 "设置" > "插件"

4. 在插件列表中找到 "LDAP Default Group"

5. 点击 "安装" 按钮

6. 安装完成后，点击 "启用" 按钮启用插件

## 配置指南

本插件默认无需额外配置，安装并启用后将自动工作。插件会在以下情况自动设置用户的默认分组：

- 当新用户通过 LDAP 同步添加到 GLPI 时
- 当现有用户通过 LDAP 同步更新信息时

插件工作原理：
1. 检测用户所属的所有群组
2. 优先选择动态群组作为默认分组
3. 如果没有动态群组，则选择用户的第一个普通群组
4. 将选定的群组设置为用户的默认分组

## 使用示例

### 场景1：新用户通过LDAP同步

当新用户通过LDAP同步添加到GLPI系统时，插件会自动：
1. 获取该用户在LDAP中所属的所有群组
2. 分析这些群组在GLPI中的对应关系
3. 自动将用户的第一个群组（优先动态群组）设置为默认分组

### 场景2：现有用户信息更新

当现有用户通过LDAP同步更新信息时，插件会检查用户的群组分配是否有变化，并在必要时更新默认分组。

## 兼容性信息

| GLPI版本 | 兼容性 |
|---------|--------|
| 10.0.x  | ✅ 兼容 |
| 10.1.x  | ✅ 兼容 |
| 9.x     | ❌ 不兼容 |

## 故障排除

### 问题：插件未自动设置默认分组

可能的原因和解决方案：
1. 确认插件已正确安装并启用
2. 检查用户是否属于至少一个群组
3. 查看GLPI日志文件（`files/_log/`）获取详细错误信息

## 更新日志

### v1.0.0
- 初始版本发布
- 实现LDAP用户同步时自动设置默认分组功能
- 支持优先选择动态群组

## 贡献

欢迎提交问题报告和功能请求。如需贡献代码，请提交Pull Request。

## 联系方式

如有任何问题或建议，请通过GLPI官方论坛或GitHub仓库联系作者。
